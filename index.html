<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fake News Detection System</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
body { font-family: 'Poppins', sans-serif; }
.gradient-bg { background: linear-gradient(135deg, #667eea, #764ba2); }
.card-shadow { box-shadow: 0 10px 40px rgba(0,0,0,0.08); }
</style>
</head>

<body class="bg-gradient-to-br from-slate-50 via-indigo-50 to-slate-100 min-h-screen">
<div id="root"></div>

<script type="text/babel">
const { useState } = React;

/* ------------------ INDICATORS ------------------ */

// Sensational / Fake Indicators
const fakeIndicators = [
  "breaking","shocking","exclusive","you won't believe",
  "secret","banned","exposed","cover-up","conspiracy",
  "leaked","elite","agenda","click here"
];

// Real + India-Specific Indicators
const realIndicators = [
  "according to","reported by","official statement","confirmed by",
  "press release","data shows","statistics","survey","study",

  // Indian institutions
  "government of india","ministry of","supreme court",
  "reserve bank of india","rbi","election commission",
  "cbi","imd",

  // Economic & market indicators
  "nifty 50","nifty 500","sensex","bse","nse",
  "gdp","inflation","repo rate","fiscal deficit",

  // News reporting tone
  "sources said","official data","annual report","policy decision"
];

// India GK / Current Affairs Knowledge Base (SAFE)
const indiaGK = [
  { topic: "Economy", keywords: ["gdp","inflation","rbi","repo rate","nifty","sensex"], boost: 2 },
  { topic: "Governance", keywords: ["supreme court","parliament","bill","cabinet"], boost: 2 },
  { topic: "Science & Tech", keywords: ["isro","satellite","space mission"], boost: 1 },
  { topic: "Health", keywords: ["health ministry","vaccination","medical study"], boost: 2 }
];

/* ------------------ ANALYSIS ENGINE ------------------ */

function analyzeNews(text) {
  const t = text.toLowerCase();
  let fakeScore = 0;
  let realScore = 0;
  let reasons = [];

  fakeIndicators.forEach(w => {
    if (t.includes(w)) {
      fakeScore++;
      reasons.push(`Sensational phrase detected: "${w}"`);
    }
  });

  realIndicators.forEach(w => {
    if (t.includes(w)) {
      realScore++;
      reasons.push(`Credible indicator found: "${w}"`);
    }
  });

  // India GK logic
  indiaGK.forEach(gk => {
    gk.keywords.forEach(word => {
      if (t.includes(word)) {
        realScore += gk.boost;
        reasons.push(`India GK match (${gk.topic}): "${word}"`);
      }
    });
  });

  if (text.split(/\s+/).length < 25) {
    fakeScore++;
    reasons.push("Article is unusually short");
  }

  const label = fakeScore > realScore ? "FAKE" : "REAL";
  const confidence = Math.min(95, 60 + Math.abs(fakeScore - realScore) * 10);

  return { label, confidence, fakeScore, realScore, reasons };
}

/* ------------------ APP ------------------ */

function App() {
  const [text, setText] = useState("");
  const [result, setResult] = useState(null);
  const [loading, setLoading] = useState(false);
  const [count, setCount] = useState(0);

  const analyze = () => {
    setLoading(true);
    setTimeout(() => {
      setResult(analyzeNews(text));
      setCount(c => c + 1);
      setLoading(false);
    }, 1000);
  };

  const samples = [
    {
      text: "BREAKING: Secret agenda exposed! NIFTY 500 will crash tomorrow due to elite conspiracy!",
      type: "fake"
    },
    {
      text: "According to official data released by the Reserve Bank of India, inflation eased slightly while NIFTY 500 closed higher.",
      type: "real"
    },
    {
      text: "The Supreme Court on Monday said the case will be listed next week as per official court sources.",
      type: "real"
    }
  ];

  return (
    <div className="min-h-screen p-6 flex flex-col items-center">
      <header className="w-full max-w-6xl mb-8 bg-gradient-to-r from-indigo-600 to-purple-600 p-6 rounded-2xl card-shadow text-white">
        <div className="flex justify-between items-center">
          <h1 className="text-3xl font-bold">
            <i className="fas fa-newspaper mr-2"></i>
            Fake News Detection System
          </h1>
          <div className="text-center">
            <div className="text-2xl font-bold">{count}</div>
            <div className="text-sm">Articles Analyzed</div>
          </div>
        </div>
        <p className="mt-2 text-indigo-100">
          India-aware AI system using linguistic patterns & current affairs knowledge
        </p>
      </header>

      <div className="flex flex-col lg:flex-row w-full max-w-6xl gap-6">
        {/* Input */}
        <div className="flex-1 bg-white p-6 rounded-2xl card-shadow">
          <textarea
            value={text}
            onChange={e => setText(e.target.value)}
            placeholder="Paste news article here..."
            className="w-full h-64 p-4 border rounded-xl focus:ring-4 focus:ring-indigo-100"
          />
          <div className="flex flex-wrap gap-2 mt-4">
            {samples.map((s, i) => (
              <button
                key={i}
                onClick={() => setText(s.text)}
                className={`px-3 py-2 rounded-lg text-sm ${
                  s.type === "fake" ? "bg-red-50 text-red-700" : "bg-emerald-50 text-emerald-700"
                }`}
              >
                {s.type.toUpperCase()} SAMPLE
              </button>
            ))}
          </div>

          <button
            onClick={analyze}
            disabled={!text || loading}
            className="mt-6 w-full gradient-bg text-white py-3 rounded-xl font-medium"
          >
            {loading ? "Analyzing..." : "Analyze News"}
          </button>
        </div>

        {/* Result */}
        <div className="flex-1">
          {result && (
            <div className={`p-6 rounded-2xl card-shadow ${
              result.label === "FAKE" ? "bg-red-50" : "bg-emerald-50"
            }`}>
              <h2 className="text-2xl font-bold mb-4">
                {result.label} NEWS ({result.confidence}% confidence)
              </h2>

              <div className="grid grid-cols-2 gap-4 mb-4">
                <div className="bg-white p-4 rounded-xl">
                  Fake Indicators: <b className="text-red-600">{result.fakeScore}</b>
                </div>
                <div className="bg-white p-4 rounded-xl">
                  Real Indicators: <b className="text-emerald-600">{result.realScore}</b>
                </div>
              </div>

              <ul className="bg-white p-4 rounded-xl max-h-60 overflow-y-auto">
                {result.reasons.slice(0, 10).map((r, i) => (
                  <li key={i} className="text-sm mb-2">• {r}</li>
                ))}
              </ul>
            </div>
          )}
        </div>
      </div>

      <footer className="mt-10 text-center text-sm text-gray-500">
        Educational demo • Uses ethical AI logic • Always verify with trusted sources
      </footer>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App />);
</script>
</body>
</html>
